<!-- Vinculando ventas -->
<app-modal [showModal]="showModalVincularVenta">
  <div class="flex items-center justify-between bg-primary-800 rounded-t p-2">
    <h1 class=" text-white px-2 py-1 rounded-t text-lg"> Vinculando venta </h1>
    <svg (click)="showModalVincularVenta = false" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="cursor-pointer feather feather-x text-white mr-2">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </div>
  <div class="p-2">
    Contenido 1
  </div>
</app-modal>

<!-- Vinculando compras -->
<app-modal [showModal]="showModalVincularCompra">
  <div class="flex items-center justify-between bg-primary-800 rounded-t p-2">
    <h1 class=" text-white px-2 py-1 rounded-t text-lg"> Vinculando compra </h1>
    <svg (click)="showModalVincularCompra = false" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
      class="cursor-pointer feather feather-x text-white mr-2">
      <line x1="18" y1="6" x2="6" y2="18"></line>
      <line x1="6" y1="6" x2="18" y2="18"></line>
    </svg>
  </div>
  <div class="p-2">
    Contenido 2
  </div>
</app-modal>


<div class="mt-4 gsap-contenido w-full md:w-1/2 mx-auto">

  <!-- Header -->
  <div class="bg-primary-800 flex w-11/12 md:w-full items-center mx-auto text-white p-3">
    <app-boton-regresar routerLink="/dashboard/operaciones"></app-boton-regresar>
    <h1 class="text-lg ml-2"> Detalles de operacion </h1>
  </div>

  <!-- Detalles generales -->
  <div class="p-2 mt-2 md:flex md:items-center md:justify-center text-sm">
    <div class="w-full md:w-1/3">
      <p class="font-semibold text-center"> Codigo de operacion </p>
      <div class="p-2 border border-gray-400 bg-gray-100 text-center mt-2">
        {{ operacion ? (operacion?.numero | codigoOperaciones) : null }}
      </div>
    </div>
    <div class="w-full mt-4 md:mt-0 md:w-1/3 md:ml-7">
      <p class="font-semibold text-center"> Fecha de operacion </p>
      <input (change)="actualizarFechaOperacion()" onkeydown="return false" [(ngModel)]="fecha_operacion" type="date"
        class="border mt-2 focus:outline-none text-center w-full border-gray-400 p-2">
    </div>
  </div>

  <!-- Calculos -->
  <div class="mt-4 flex items-center justify-center text-sm">
    <div class="w-11/12">
      <div class="wfull md:w-1/2 border mx-auto border-gray-400">
        <div class="flex items-center">
          <div class="w-1/2 p-2 bg-gray-100 font-semibold">
            Total ventas
          </div>
          <div class="w-1/2 border-l p-2 border-gray-400">
            ${{ 15000 | moneda }}
          </div>
        </div>
      </div>
      <div class="w-full md:w-1/2  mx-auto border border-t-0 border-gray-400">
        <div class="flex items-center">
          <div class="w-1/2 p-2 bg-gray-100 font-semibold">
            Total compras
          </div>
          <div class="w-1/2 border-l p-2 border-gray-400">
            ${{ 10000 | moneda }}
          </div>
        </div>
      </div>
      <div class="w-full md:w-1/2  mx-auto border border-t-0 border-gray-400">
        <div class="flex items-center">
          <div class="w-1/2 p-2 bg-gray-100 font-semibold">
            Saldo
          </div>
          <div class="w-1/2 border-l p-2 border-gray-400">
            ${{ 5000 | moneda }}
          </div>
        </div>
      </div>
      <div class="w-full md:w-1/2  mx-auto border border-t-0 border-gray-400">
        <div class="flex items-center">
          <div class="w-1/2 p-2 bg-gray-100 font-semibold">
            Importes
          </div>
          <div class="w-1/2 border-l p-2 border-gray-400">
            ${{ 10000 | moneda }}
          </div>
        </div>
      </div>
      <div class="w-full md:w-1/2  mx-auto border border-t-0 border-gray-400">
        <div class="flex items-center">
          <div class="w-1/2 p-2 bg-gray-100 font-semibold">
            Total
          </div>
          <div class="w-1/2 border-l font-semibold bg-green-100 p-2 border-gray-400">
            ${{ 10000 | moneda }}
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-4 p-2 text-sm">

    <!-- Ventas -->
    <div
      class="p-2 border flex items-center justify-between text-gray-700 shadow border-gray-400 w-full text-center bg-gray-100">
      <h2 class="font-semibold md:text-lg"> Listado de ventas </h2>
      <div class="text-gray-900">
        <button (click)="openModalVincularVenta()"
          class="p-2 bg-white border focus:outline-none border-gray-500 rounded hover:text-secondaryColor"
          title="Vincular venta">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M9 3.75H6.912a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859M12 3v8.25m0 0l-3-3m3 3l3-3" />
          </svg>
        </button>
        <button class="p-2 bg-white ml-2 border focus:outline-none border-gray-500 rounded hover:text-secondaryColor"
          title="Nueva venta">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
        </button>
      </div>
    </div>

    <!-- No hay ventas -->

    <div *ngIf="operacionVentasPropias.length <= 0"
      class="p-2 text-center mt-2 border border-gray-400 text-gray-600 bg-gray-50">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="w-12 h-12 mx-auto">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
      </svg>
      <p class="text-gray-600 md:text-base text-xs mt-2"> No hay ventas relacionadas con la operacion </p>
    </div>

    <!-- Ventas vinculadas -->

    <div *ngIf="operacionVentasPropias.length > 0">
      <div class="border border-gray-400 mt-2" *ngFor="let relacion of operacionVentasPropias">
        <div class="flex font-semibold items-center justify-between bg-green-100 border-b border-gray-400 p-2">
          <p> <span> {{ relacion.venta_propia.nro | codigoVentasPropias
              }}</span> </p>
          <p> <span> {{ relacion.venta_propia.fecha_venta | fecha
              }}</span> </p>
        </div>
        <div class="p-2">
          <p class="mt-1"> <span class="font-semibold"> Cliente: </span> <span> {{
              relacion.venta_propia.cliente.descripcion }}</span> </p>
          <p class="mt-2"> <span class="font-semibold"> Precio total: </span> <span> ${{
              relacion.venta_propia.precio_total | moneda }}</span> </p>
        </div>
      </div>
    </div>

    <!-- Compras -->

    <div
      class="p-2 border mt-4 flex items-center justify-between text-gray-700 shadow border-gray-400 w-full text-center bg-gray-100">
      <h2 class="font-semibold md:text-lg"> Listado de compras </h2>
      <div class="text-gray-900">
        <button (click)="openModalVincularCompra()"
          class="p-2 bg-white border focus:outline-none border-gray-500 rounded hover:text-secondaryColor"
          title="Vincular compra">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M9 3.75H6.912a2.25 2.25 0 00-2.15 1.588L2.35 13.177a2.25 2.25 0 00-.1.661V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18v-4.162c0-.224-.034-.447-.1-.661L19.24 5.338a2.25 2.25 0 00-2.15-1.588H15M2.25 13.5h3.86a2.25 2.25 0 012.012 1.244l.256.512a2.25 2.25 0 002.013 1.244h3.218a2.25 2.25 0 002.013-1.244l.256-.512a2.25 2.25 0 012.013-1.244h3.859M12 3v8.25m0 0l-3-3m3 3l3-3" />
          </svg>
        </button>
        <button class="p-2 bg-white ml-2 border focus:outline-none border-gray-500 rounded hover:text-secondaryColor"
          title="Nueva compra">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="w-5 h-5">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
          </svg>
        </button>
      </div>
    </div>

    <!-- No hay compras -->

    <div *ngIf="operacionCompras.length <= 0"
      class="p-2 text-center mt-2 border border-gray-400 text-gray-600 bg-gray-50">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
        class="w-12 h-12 mx-auto">
        <path stroke-linecap="round" stroke-linejoin="round"
          d="M20.25 7.5l-.625 10.632a2.25 2.25 0 01-2.247 2.118H6.622a2.25 2.25 0 01-2.247-2.118L3.75 7.5m6 4.125l2.25 2.25m0 0l2.25 2.25M12 13.875l2.25-2.25M12 13.875l-2.25 2.25M3.375 7.5h17.25c.621 0 1.125-.504 1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125z" />
      </svg>
      <p class="text-gray-600 text-xs md:text-base mt-2"> No hay compras relacionadas con la operacion </p>
    </div>

    <!-- Compras vinculadas -->

    <div *ngIf="operacionCompras.length > 0">
      <div class="border border-gray-400 mt-2" *ngFor="let relacion of operacionCompras">
        <div class="flex font-semibold items-center justify-between bg-red-100 border-b border-gray-400 p-2">
          <p> <span> {{ relacion.compra.nro | codigoCompras }}</span> </p>
          <p> <span> {{ relacion.compra.fecha_compra | fecha
              }}</span> </p>
        </div>
        <div class="p-2">
          <p class="mt-1"> <span class="font-semibold"> Proveedor: </span> <span> {{
              relacion.compra.proveedor.descripcion }}</span> </p>
          <p class="mt-2"> <span class="font-semibold"> Precio total: </span> <span> ${{ relacion.compra.precio_total |
              moneda }}</span> </p>
        </div>
      </div>
    </div>

  </div>



</div>
